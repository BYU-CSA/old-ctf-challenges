FROM ubuntu:latest

# update and install dependencies
RUN apt update && apt upgrade -y && apt install openssh-server sudo -y

# add user for players to log in as
RUN useradd -rm -d /home/administrator -s /bin/bash -u 1000 administrator
RUN echo 'administrator:password' | chpasswd
RUN usermod -aG sudo administrator

# add flag
RUN echo "byuctf{@lw@ys_ch@ng3_d3f@ult_cr3ds}" > /root/flag.txt

# run SSH server
RUN service ssh start
EXPOSE 22
CMD ["/usr/sbin/sshd","-D"]